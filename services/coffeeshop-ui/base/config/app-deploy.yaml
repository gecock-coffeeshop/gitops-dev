apiVersion: appsody.dev/v1beta1
kind: AppsodyApplication
metadata:
  annotations:
    architecture: x86_64
    authoritative-source-url: registry.access.redhat.com
    build-date: 2019-10-29T16:44:53.794580
    commit.image.appsody.dev/author: Matthew P Wilson <matthew.wilson@uk.ibm.com>
    commit.image.appsody.dev/committer: GitHub Enterprise <noreply@github.ibm.com>
    commit.image.appsody.dev/date: Tue Feb 25 13:13:29 2020 +0000
    commit.image.appsody.dev/message: 'Merge pull request #4 from appsody-coffeeshop/update-deploy'
    commit.stack.appsody.dev/author: Adam Wisniewski <awisniew@us.ibm.com>
    commit.stack.appsody.dev/committer: GitHub <noreply@github.com>
    commit.stack.appsody.dev/contextDir: /incubator/java-openliberty
    commit.stack.appsody.dev/date: Tue Mar 31 13:41:02 2020 +0100
    commit.stack.appsody.dev/message: 'java-openliberty: add serverStartTimeout config
      to stack pom (#732)'
    description: The Universal Base Image is designed and engineered to be the base
      layer for all of your containerized applications, middleware and utilities.
      This base image is freely redistributable, but Red Hat only supports Red Hat
      technologies through subscriptions for Red Hat products. This image is maintained
      by Red Hat and updated regularly.
    distribution-scope: public
    image.opencontainers.org/created: "2020-04-02T08:36:55Z"
    image.opencontainers.org/documentation: https://github.ibm.com/appsody-coffeeshop/coffeeshop-ui
    image.opencontainers.org/revision: 979de020cf5cf69aa37f63cbd7c25f752739872b
    image.opencontainers.org/source: |
      https://github.ibm.com/appsody-coffeeshop/coffeeshop-ui/tree/master
    image.opencontainers.org/url: https://github.ibm.com/appsody-coffeeshop/coffeeshop-ui
    stack.appsody.dev/authors: Mike Andrasak <andrasak@us.ibm.com>, Andy Mauer <ajmauer@us.ibm.com>,
      Scott Kurz <skurz@us.ibm.com>, Adam Wisniewski <awisniew@us.ibm.com>
    stack.appsody.dev/configured: docker.io/appsody/java-openliberty:0.2
    stack.appsody.dev/created: "2020-03-31T12:43:54Z"
    stack.appsody.dev/description: Open Liberty & OpenJ9 using Maven
    stack.appsody.dev/licenses: Apache-2.0
    stack.appsody.dev/revision: dc507ec2d26fc95924da0fff0d137d85986b94bd
    stack.appsody.dev/source: https://github.com/appsody/stacks/tree/master/incubator/java-openliberty/image
    stack.appsody.dev/tag: docker.io/appsody/java-openliberty:0.2.5
    stack.appsody.dev/title: Open Liberty
  creationTimestamp: null
  labels:
    image.opencontainers.org/title: coffeeshop-ui
    stack.appsody.dev/id: java-openliberty
    stack.appsody.dev/version: 0.2.5
  name: coffeeshop-ui
  namespace: default
spec:
  applicationImage: index.docker.io/matthewpwilson/coffeeshop-ui:319bc43f279dfd9ada0a3731d242b9509529d0fc
  createKnativeService: false
  env:
  - name: MP_MESSAGING_CONNECTOR_LIBERTY_KAFKA_BOOTSTRAP_SERVERS
    value: my-cluster-kafka-bootstrap.kafka.svc:9092
  - name: COM_IBM_RUNTIMES_EVENTS_COFFEESHOP_HTTP_BARISTASERVICE_MP_REST_URL
    valueFrom:
      secretKeyRef:
        key: url
        name: default-barista-http
  expose: true
  livenessProbe:
    failureThreshold: 12
    httpGet:
      path: /health/live
      port: 9080
    initialDelaySeconds: 10
    periodSeconds: 2
  monitoring:
    endpoints:
    - basicAuth:
        password:
          key: password
          name: metrics-liberty
        username:
          key: username
          name: metrics-liberty
      interval: 10s
      tlsConfig:
        insecureSkipVerify: true
    labels:
      k8s-app: ""
  readinessProbe:
    failureThreshold: 12
    httpGet:
      path: /health/ready
      port: 9080
    initialDelaySeconds: 10
    periodSeconds: 2
    timeoutSeconds: 1
  service:
    annotations:
      prometheus.io/scrape: "true"
    consumes:
    - category: openapi
      name: barista-http
      namespace: default
    port: 9080
    type: NodePort
  stack: java-openliberty
  version: 1.0.0
status: {}
